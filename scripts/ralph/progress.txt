# Ralph Progress Log
Started: Sat Jan 31 10:39:57 PST 2026

## Codebase Patterns
- Use `console.warn` with `[ModuleName]` prefix for missing config warnings
- Use `console.error` with `[FunctionName]` prefix for API failures
- Polar token checks: check at both initialization (polar.ts) and usage (actions.ts)
- Server actions in `lib/db/actions.ts` use `"use server"` directive
- Environment variables accessed via `process.env.VARIABLE_NAME`
- New marketing pages: create folder in `app/(marketing)/[page-name]/page.tsx`
- Footer links to legal pages: `/terms` and `/privacy` routes defined in marketing-footer.tsx
- URL parameters: use `useSearchParams()` to read, `router.replace()` with `{ scroll: false }` for shallow routing
- Audience mode: `AudienceType` exported from marketing-hero.tsx, values are "creator" | "learner"
- Form section IDs: `#apply` for creator application, `#waitlist` for learner waitlist - use for anchor navigation
- Suspense boundaries: Components using `useSearchParams()` must be wrapped in `<Suspense>` for Next.js 15 static generation
- Navigation: Marketing navbar links defined in `navItems` array in marketing-navbar.tsx - shared by desktop and mobile
- Blog posts: MDX files in `app/(marketing)/blog/posts/[slug].mdx` - frontmatter needs title, publishedAt, category, description, summary

---

## 2026-01-31 10:45 - US-001
- What was implemented: Enhanced error handling for Polar pricing environment variables
- Files changed:
  - `lib/polar.ts`: Added early warning when POLAR_ACCESS_TOKEN is missing
  - `lib/db/actions.ts`: Added pre-check in getPolarProducts() and improved error messages
- **Learnings for future iterations:**
  - The Polar SDK is initialized at module load time, so warnings appear at startup
  - getPolarProducts() is already wrapped in try/catch - added early return for missing token
  - Error messages should include function name prefix for easier debugging
  - TypeScript typechecks pass even without POLAR_ACCESS_TOKEN (uses empty string fallback)
---

## 2026-01-31 11:15 - US-002
- What was implemented: Complete rewrite of Terms of Service page for Dojo
- Files changed:
  - `app/(marketing)/terms/page.tsx`: Replaced all content from generic "Vibe Marketing" to Dojo-specific terms
- **Learnings for future iterations:**
  - Legal pages use `FadeIn`, `GradientHeading`, and `SectionCard` components for consistent styling
  - Use `&quot;` for double quotes in JSX text to avoid escaping issues
  - Contact email links should use `text-dojo-cyan hover:underline` class for consistency with site theme
  - Terms page structure: numbered sections with h2 headings, ul lists for bullet points
  - The page is a server component (no "use client" directive needed for static content)
---

## 2026-01-31 12:30 - US-003
- What was implemented: Created Privacy Policy page for Dojo
- Files changed:
  - `app/(marketing)/privacy/page.tsx`: Created new page with 12 sections covering data collection, analytics, payment processing, content uploads, and user rights
- **Learnings for future iterations:**
  - Privacy page didn't exist - footer linked to `/privacy` but no page was created
  - When footer links to a page that doesn't exist, check for 404s and create missing pages
  - Use `&apos;` for apostrophes in JSX text (e.g., "Polar's privacy policy")
  - Polar payment processing section important for transparency about third-party data handling
  - AI processing disclosure needed when content is transformed by AI systems
---

## 2026-01-31 12:45 - US-004 & US-005
- What was implemented: Complete FAQ rewrite with Creator and Learner focused questions
- Files changed:
  - `app/(marketing)/marketing-faq.tsx`: Replaced all 8 social media marketing FAQs with Dojo-specific content
- **Creator FAQs added:**
  - Revenue share (70% of net revenue, monthly payouts)
  - Content upload process (AI transforms content into micro-lessons)
  - Content ownership (creator retains IP)
  - Payout timing (monthly, $50 minimum)
- **Learner FAQs added:**
  - Subscription pricing (flexible plans, unlimited access)
  - Lesson format (5-10 minute micro-lessons)
  - Launch timeline (coming soon, join waitlist)
  - Early access benefits (founding member pricing, beta features)
- **Learnings for future iterations:**
  - FAQ grid shows first 4 items, then heading, then items 5-8
  - Both mobile (accordion) and desktop (grid) layouts use same faqItems array
  - Answers should be concise (1-3 sentences) for grid display
  - Include calls-to-action where appropriate (e.g., "Check our pricing page")
---

## 2026-01-31 13:00 - US-006
- What was implemented: Replaced developer testimonials with creator-focused quotes
- Files changed:
  - `app/(marketing)/marketing-testimonial.tsx`: Replaced 13 fake developer testimonials with 10 creator quotes
- **Changes made:**
  - New heading: "What Creators Are Saying" (was "Customers")
  - Each quote has: name, niche tag (e.g., "Fitness Creator"), and creator-relevant quote
  - Topics covered: revenue share excitement, AI content transformation, ownership retention, passive income, micro-lesson format
  - Creator niches: Fitness, Photography, Culinary, Music, Language, Business, Writing, Design, Yoga, Developer Education
- **Learnings for future iterations:**
  - Username field can include niche tag (e.g., "@handle • Fitness Creator")
  - Reviews array is split in half for two marquee rows (firstRow, secondRow)
  - Images come from `/tweet-avatars/` directory - reuse existing images
  - Keep quotes under 150 characters for good card display
---

## 2026-01-31 13:15 - US-007
- What was implemented: URL parameter tracking for audience mode
- Files changed:
  - `app/(marketing)/marketing-hero.tsx`: Added useSearchParams and useRouter for URL param tracking
- **Implementation details:**
  - Reads `?mode=creator` or `?mode=learner` from URL
  - Defaults to "learner" when no param or invalid value
  - Toggle updates URL using shallow routing (no page reload)
  - Exported `AudienceType` type for use by other components
- **Learnings for future iterations:**
  - Use `useSearchParams()` from 'next/navigation' to read URL params
  - Use `router.replace()` with `{ scroll: false }` for shallow routing without scroll
  - Create new URLSearchParams from existing params to preserve other query strings
  - useEffect syncs state when URL changes externally (browser back/forward)
---

## 2026-01-31 13:30 - US-008
- What was implemented: Dynamic stats section in hero based on audience mode
- Files changed:
  - `app/(marketing)/marketing-hero.tsx`: Made socialProofStats an object with creator/learner arrays
- **Implementation details:**
  - Hero already had dynamic headline, subheadline, and CTA per mode
  - Made socialProofStats object with creator/learner keys
  - Creator stats: 70% Revenue Share, 10K+ Creators Interested, Monthly Payout Schedule, AI Lesson Structuring
  - Learner stats: 5min Average Lesson, 100+ Topics Available, 3x Better Retention, AI Personalized Paths
  - Added AnimatePresence wrapper for smooth stat transitions
- **Learnings for future iterations:**
  - Convert arrays to objects with mode keys for mode-dependent data: `{ creator: [...], learner: [...] }`
  - Wrap mode-dependent content in AnimatePresence for smooth transitions
  - Use `key={audience}` on motion.div to trigger exit/enter animations
---

## 2026-01-31 13:45 - US-009
- What was implemented: Dynamic features section based on audience mode
- Files changed:
  - `app/(marketing)/dojo-features.tsx`: Converted features array to object with creator/learner keys
- **Creator features (6):**
  - 70% Revenue Share, AI Lesson Structuring, Reach Hungry Learners
  - Simple Content Upload, Analytics Dashboard, Keep Your IP
- **Learner features (6):**
  - 5-Minute Micro-Lessons, Real Practitioners, Structured Learning Paths
  - Swipe-to-Learn Feed, 3x Better Retention, 100+ Topics
- **Learnings for future iterations:**
  - Import AudienceType from marketing-hero.tsx for type consistency
  - Each section can read mode from URL params independently (no prop drilling needed)
  - Added new icons: Upload, TrendingUp, Clock, BookOpen, Target, Award
---

## 2026-01-31 14:00 - US-010
- What was implemented: Dynamic Why Dojo section based on audience mode
- Files changed:
  - `app/(marketing)/why-dojo-section.tsx`: Converted competitors array to object with creator/learner content, added AnimatePresence
- **Creator mode comparisons (4):**
  - YouTube: 70% revenue share vs YouTube's ~55%, paid subscribers, no algorithm chase
  - Skillshare: Keep IP ownership, AI handles structure, transparent earnings
  - Patreon: AI transforms content, built-in learning tools, reach active learners
  - Teachable: Built-in discovery, AI production, marketplace exposure
- **Learner mode comparisons (4):**
  - Skillshare/Udemy: AI transforms to micro-lessons, 5min vs 5hrs, no 2x speed
  - Duolingo: Real practitioner knowledge, any skill not just languages
  - TikTok/Shorts: Structured paths, progressive learning, 3x retention
  - MasterClass: Learn from practitioners, interactive exercises, affordable
- **Learnings for future iterations:**
  - File had pre-existing mode implementation but with a syntax error (missing AnimatePresence closing tag)
  - Always run lint to catch JSX tag mismatches before committing
  - Added new icons: Youtube, DollarSign (for Teachable comparison)
---

## 2026-01-31 14:15 - US-011
- What was implemented: Dynamic How It Works section based on audience mode
- Files changed:
  - `app/(marketing)/how-it-works-section.tsx`: Converted static flow to dynamic creatorFlow/learnerFlow objects
- **Creator flow (Upload → AI → Monetization):**
  - Input: YouTube Videos, Course Material, Podcast Episodes
  - Process (Dojo Engine): Smart Segmentation, Auto-Structure, Engagement Boost
  - Output: Passive Income card showing subscribers (1,247) and monthly revenue ($2,840)
- **Learner flow (Discover → Learn → Master):**
  - Input: Browse Topics, Set Goals, Choose Path
  - Process (Personalized Learning): Smart Matching, Bite-Sized Delivery, Adaptive Pacing
  - Output: Skill Mastery card showing progress (78%) and streak (12 days)
- **Learnings for future iterations:**
  - Remove unused imports (Play, Clock, CheckCircle, Upload) to avoid lint warnings
  - Each flow can have different output card designs - creator shows revenue, learner shows progress
  - Section subheading also changes dynamically to match the audience focus
  - Icons added: Compass, Target, Award, Zap for learner flow; DollarSign, TrendingUp for creator flow
---

## 2026-01-31 14:30 - US-012
- What was implemented: Cross-promotion CTAs in both Creator and Learner forms
- Files changed:
  - `app/(marketing)/creator-application-section.tsx`: Added "Learner? Join Waitlist!" CTA section
  - `app/(marketing)/learner-waitlist-section.tsx`: Added "Creator? Apply Now!" CTA section
- **Implementation details:**
  - Each CTA appears below the privacy note with a separator border
  - Creator form: Sparkles icon + "Learner? Join Waitlist!" button
  - Learner form: Send icon + "Creator? Apply Now!" button
  - Clicking updates URL mode param and scrolls to target form (#waitlist or #apply)
  - Uses outline button variant with cyan hover effects (border + background)
- **Learnings for future iterations:**
  - Use `useRouter` and `useSearchParams` for mode switching with URL param updates
  - `router.push()` with `{ scroll: false }` prevents automatic scroll, then use `setTimeout` + `scrollIntoView` for custom scroll behavior
  - Cross-promo text uses "Want to [learn/teach] instead?" pattern for clarity
  - Keep form IDs consistent (#apply for creator, #waitlist for learner) for anchor navigation
---

## 2026-01-31 14:45 - Suspense Boundary Fix
- What was implemented: Added Suspense boundaries to fix Next.js 15 build errors
- Files changed:
  - `app/(marketing)/page.tsx`: Wrapped Hero, Features, How It Works, Why Dojo, Application/Waitlist sections in Suspense
  - `app/(marketing)/for-creators/page.tsx`: Wrapped CreatorApplicationSection in Suspense
  - `app/(marketing)/for-learners/page.tsx`: Wrapped LearnerWaitlistSection in Suspense
- **Learnings for future iterations:**
  - Next.js 15 requires Suspense boundaries around components using `useSearchParams()` for static generation
  - Error message: "useSearchParams() should be wrapped in a suspense boundary"
  - Import Suspense from 'react', wrap client components that use useSearchParams
  - This affects all pages that embed components reading URL params
---

## 2026-01-31 15:00 - US-013
- What was implemented: Added Pricing link to main navigation
- Files changed:
  - `app/(marketing)/marketing-navbar.tsx`: Added Pricing to navItems array between For Learners and About
- **Implementation details:**
  - navItems array is shared between desktop and mobile menu, so one change affects both
  - Order: How It Works → For Creators → For Learners → Pricing → About
  - Link href: /pricing
  - Active state detection uses same isActive() helper that checks pathname.startsWith()
- **Learnings for future iterations:**
  - Navigation links are managed in a single navItems array for consistency
  - Both desktop nav (lg:flex) and mobile Sheet use same navItems.map() pattern
  - Adding a nav item requires only one line change in the array
---

## 2026-01-31 12:49 - US-014
- What was implemented: Created micro-learning science blog post, removed Vibe Marketing post
- Files changed:
  - `app/(marketing)/blog/posts/why-micro-learning-works.mdx`: NEW - "Why Micro-Learning Works: The Science Behind Dojo"
  - `app/(marketing)/blog/posts/example.mdx`: DELETED - Old "Vibe Marketing" post
- **Content added:**
  - Cognitive Load Theory (John Sweller) - why information overload hurts learning
  - Spacing Effect (Ebbinghaus) - why spaced repetition beats cramming
  - Active Recall - why practice beats passive consumption
  - Practitioner-based learning - why real experts teach better than academics
  - 3x retention advantage claim from combining these principles
- **Learnings for future iterations:**
  - Blog posts are MDX files in `app/(marketing)/blog/posts/[slug].mdx`
  - Slug is derived from filename (why-micro-learning-works.mdx → /blog/why-micro-learning-works)
  - Frontmatter requires: title, publishedAt, category, description, summary
  - Build output shows which blog posts are being generated (good verification)
  - Use quotes with shell paths containing parentheses: `"app/(marketing)/..."`
---
