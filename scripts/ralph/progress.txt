## Codebase Patterns
- This is a Next.js 15 project with React 19
- Uses Tailwind CSS v4 with @tailwindcss/postcss
- Marketing pages are in app/(marketing)/ route group
- Authenticated pages are in app/(authenticated)/ route group
- Uses Supabase for backend (auth + database)
- Uses Radix UI for accessible components
- Uses 'motion' library (Framer Motion) for animations
- Existing components in /components/ui/ follow shadcn/ui patterns
- Dojo design system: Use CSS vars (--dojo-cyan, --dojo-bg) and utility classes (dojo-card, dojo-btn-primary)
- Animation patterns: layoutId for toggle animations, AnimatePresence mode="wait" for content swaps
- Use GlowEffect and Magnetic components from /components/ for interactive buttons
- Form submissions: Use server actions in lib/db/actions.ts with exported types (e.g., FormData, Result types)
- Supabase RLS for anonymous inserts: Use `with check (true)` policy
- No shadcn Select component - use native select with custom styling matching Input component
- Lucide icons with JS global names (e.g., `Infinity`) must be aliased: `import { Infinity as InfinityIcon }` to avoid TypeScript conflicts with `repeat: Infinity` in animations

---

# Progress Log

## Project Initialized - Marketing Site Redesign
- PRD created with 17 user stories
- Design reference: jointrybe.com format with pitch deck aesthetics (dark theme, cyan accents)
- Target: Drive creator applications and learner waitlist signups

---

## 2026-01-30 - US-001: Implement dark theme design system
- **Status**: Already implemented
- **Files**: app/globals.css, app/(marketing)/layout.tsx
- **What was found**:
  - Dojo color palette already defined in globals.css (lines 171-202)
  - `.dojo` theme class overrides shadcn variables (lines 205-239)
  - Utility classes: .dojo-bg, .dojo-card, .dojo-btn-primary, etc.
  - Marketing layout already applies `className="dojo"`
- **Learnings for future iterations**:
  - Use `.dojo` class on root element to activate dark theme
  - Dojo colors available via CSS vars: --dojo-cyan, --dojo-bg, --dojo-text
  - Use utility classes like .dojo-card for consistent styling
  - Tailwind v4 uses @theme inline in CSS, not tailwind.config.js

---

## 2026-01-30 - US-002: Redesign marketing navbar with login link
- **Status**: Already implemented
- **Files**: app/(marketing)/marketing-navbar.tsx, app/(marketing)/marketing-header.tsx
- **What was found**:
  - Full navbar implementation exists in marketing-navbar.tsx
  - Uses MainNav component with session prop for conditional auth rendering
  - Logo: lowercase "dojo" text in line 50-52
  - Nav links: How It Works, For Creators, For Learners, About (lines 29-34)
  - Login link: /auth/login on right side (lines 87-91)
  - CTA button: "Get Early Access" with primary styling (lines 93-100)
  - Mobile menu: Sheet component with hamburger trigger (lines 105-155)
  - Sticky header: `sticky top-0 backdrop-blur-md bg-background/80` (line 38)
  - Active state animation with motion/framer-motion (lines 69-75)
- **Learnings for future iterations**:
  - Marketing header uses Suspense with fallback for session loading
  - Uses shadcn Sheet component for mobile menu
  - Active nav indicator uses framer-motion layoutId for smooth transitions
  - Browser verification blocked by missing .env.local (Supabase credentials)
  - All nav links defined in navItems array for easy updates
  - Responsive breakpoints: lg:flex for desktop nav, lg:hidden for mobile trigger

---

## 2026-01-30 - US-003: Build homepage hero section with audience toggle
- **Status**: Completed
- **Files**: app/(marketing)/marketing-hero.tsx
- **What was implemented**:
  - Created audience toggle switch (I'm a Creator / I'm a Learner) with animated layoutId indicator
  - Dynamic headline and subheadline content based on toggle selection
    - Creator: "Turn Your Expertise Into Income"
    - Learner: "Master Any Skill in Minutes a Day"
  - Dynamic CTA buttons with AnimatePresence for smooth transitions
    - Creator: "Apply as Creator" -> /for-creators#apply
    - Learner: "Join Waitlist" -> #waitlist
  - Floating social proof stat cards (4 cards: 70%, 3min, 10K+, AI)
    - Each with icon from lucide-react, hover animations, and dojo-card styling
  - Background gradient effects using dojo-gradient-hero and dojo-gradient-radial
  - Animated glow orbs with motion.div for continuous pulsing effect
- **Learnings for future iterations**:
  - Use layoutId for smooth animated transitions between toggle states
  - AnimatePresence with mode="wait" for clean exit/enter animations
  - Dojo utility classes work well: dojo-text-gradient, dojo-card, dojo-btn-primary, dojo-btn-secondary
  - CSS variable approach: style={{ background: "radial-gradient(circle, var(--dojo-cyan) 0%, transparent 70%)" }}
  - motion.div animate arrays for looping animations: scale: [1, 1.2, 1], repeat: Infinity
  - Social proof stats should link to actual data sources in future (currently static)

---

## 2026-01-30 - US-004: Create features grid section
- **Status**: Completed
- **Files**:
  - app/(marketing)/dojo-features.tsx (new)
  - app/(marketing)/page.tsx (updated import)
- **What was implemented**:
  - Created DojoFeaturesSection component with 6 Dojo-specific features
  - Features: Universal Scaffolding, Feed-to-Mastery Funnel, AI-Powered Repurposing, Peer-Reviewed Discovery, Native Monetization, Low-Friction Mastery
  - Section headline: "The First Marketplace Powered By Cognitive Scaffolding"
  - Responsive grid: grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 (1x6 mobile, 2x3 tablet, 3x2 desktop)
  - Each card has: lucide-react icon, title, description, dojo-card styling with hover glow
  - Scroll-triggered animations using useInView with staggered reveal (staggerChildren: 0.1)
  - Hover effects: y:-8 lift, border color change to --dojo-border-accent, subtle inset shadow
- **Learnings for future iterations**:
  - lucide-react provides good icons for features: Layers, Compass, Sparkles, Users, DollarSign, Zap
  - Use useInView({ once: true, amount: 0.2 }) for scroll-triggered animations
  - containerVariants/itemVariants pattern for staggered animations works well
  - Hover glow overlay pattern: absolute positioned div with opacity transition
  - The old marketing-features.tsx is still in the codebase but no longer used on homepage
  - Build fails due to missing POLAR_WEBHOOK_SECRET but typecheck and lint pass

---

## 2026-01-30 - US-005: Build How It Works visual flow section
- **Status**: Completed
- **Files**:
  - app/(marketing)/how-it-works-section.tsx (new)
  - app/(marketing)/page.tsx (updated import)
- **What was implemented**:
  - Created HowItWorksSection component with three-step visual flow
  - Input column: YouTube, Course Videos, Podcasts with icons
  - Dojo Engine column (center): Semantic Segmentation, Pedagogical Labeling, Synthesis Optimization
  - Output column: Sample micro-lesson card with video thumbnail, duration badge, quiz indicator
  - Animated arrows between sections using motion.div with x/y oscillation
  - Connecting lines between process steps using gradient borders
  - Desktop layout: Horizontal flow with flexbox (3 columns)
  - Mobile layout: Vertical flow with centered elements
  - Dark background with glowing radial gradient centered on Dojo Engine
  - Scroll-triggered animations using useInView with staggered reveal
- **Learnings for future iterations**:
  - Use hidden lg:flex / lg:hidden pattern for responsive desktop/mobile layouts
  - Animated arrows: motion.div with animate={{ x: [0, 8, 0] }} and repeat: Infinity
  - For vertical mobile arrows, use rotate-90 on ArrowRight icon
  - Sample lesson card pattern: aspect-video container with Play button overlay
  - Connecting lines between steps: absolute positioned div with gradient background
  - lucide-react icons for content types: Video, FileVideo, Podcast

---

## 2026-01-30 - US-006: Create competitive differentiation section
- **Status**: Completed
- **Files**:
  - app/(marketing)/why-dojo-section.tsx (new)
  - app/(marketing)/page.tsx (updated import)
- **What was implemented**:
  - Created WhyDojoSection component with "Why Dojo?" headline
  - 4 competitor comparison cards: Skillshare/Udemy, Duolingo, TikTok, MasterClass
  - Each card shows: competitor icon, name, what they do well (italicized quote), arrow divider, and 3 bullet points of what Dojo adds
  - Responsive grid: grid-cols-1 md:grid-cols-2 (2x2 on desktop, 1x4 on mobile)
  - Scroll-triggered staggered animations using useInView and motion variants
  - Hover effects: y:-6 lift, border glow with --dojo-border-accent
  - Icons from lucide-react: GraduationCap, Gamepad2, MonitorPlay, Star
  - Divider between "they do well" and "Dojo adds" uses ArrowRight icon
- **Learnings for future iterations**:
  - Competitor comparison pattern: italicized quote for their strength, bullet points for Dojo's additions
  - Use &ldquo; and &rdquo; for proper curly quotes in JSX
  - ArrowRight with text in a divider pattern: flex-1 h-px + icon + text + flex-1 h-px
  - Consistent card pattern from DojoFeaturesSection works well across sections

---

## 2026-01-30 - US-007: Build creator application form section
- **Status**: Completed
- **Files**:
  - app/(marketing)/creator-application-section.tsx (new)
  - lib/db/actions.ts (updated - added submitCreatorApplication action)
  - supabase/migrations/20260130100000_creator_applications.sql (new)
  - app/(marketing)/page.tsx (updated import)
- **What was implemented**:
  - Created CreatorApplicationSection component with full form
  - Form fields: Full Name, Email, Content Niche (dropdown), Social Profile Link, Monthly Audience Size
  - Client-side validation with error states per field
  - Server action submitCreatorApplication with email validation and duplicate check
  - Success state with animated transition and CheckCircle icon
  - Error state with banner showing error message
  - Supabase migration creates creator_applications table with RLS policy for anonymous inserts
  - Section added to homepage after WhyDojoSection
- **Learnings for future iterations**:
  - Use native select element with custom styling (no shadcn Select component in codebase)
  - selectStyles constant for consistent select styling matching Input component
  - Form state machine pattern: "idle" | "submitting" | "success" | "error"
  - AnimatePresence mode="wait" for smooth form/success state transitions
  - Server action types exported alongside functions: CreatorApplicationFormData, CreatorApplicationResult
  - RLS policy for anonymous inserts: `with check (true)` allows any insert
  - Supabase error code "23505" indicates unique constraint violation (duplicate email)

---

## 2026-01-30 - US-008: Build learner waitlist form section
- **Status**: Completed
- **Files**:
  - app/(marketing)/learner-waitlist-section.tsx (new)
  - lib/db/actions.ts (updated - added submitLearnerWaitlist action)
  - supabase/migrations/20260130110000_learner_waitlist.sql (new)
  - app/(marketing)/page.tsx (updated import)
- **What was implemented**:
  - Created LearnerWaitlistSection component with "Get Early Access" headline
  - Form fields: Email (required), Name (optional), Interests multi-select
  - Interests shown as toggle buttons: Fitness & Health, Music & Audio, Beauty & Makeup, Other
  - Client-side validation for email and interests (at least one required)
  - Server action submitLearnerWaitlist with email validation and duplicate check
  - Success state with animated transition and "You're on the List!" message
  - Error state with banner showing error message
  - Supabase migration creates learner_waitlist table with email unique constraint
  - RLS policy for anonymous inserts, indexes on email and created_at
  - Section added to homepage after CreatorApplicationSection
- **Learnings for future iterations**:
  - Multi-select pattern: Use toggle buttons instead of checkboxes for cleaner mobile UX
  - Store arrays in Postgres: Use `text[]` type in schema, pass array directly to insert
  - Interests field validation: Check array length > 0 for required multi-select
  - Toggle button styling: Use conditional classes based on isSelected state
  - Optional fields: Use `?.trim() || null` pattern to convert empty strings to null
  - Section placement: Learner waitlist after creator application maintains natural flow

---

## 2026-01-30 - US-009: Create dedicated For Creators page
- **Status**: Completed
- **Files**:
  - app/(marketing)/for-creators/page.tsx (new)
- **What was implemented**:
  - Created /for-creators route as a client component page
  - Hero section with "Turn Your Expertise Into Scalable Income" headline and badge
  - Animated background gradient effects and glow orbs matching homepage hero
  - CTA buttons: "Apply Now" (links to #apply) and "See How It Works" (links to /how-it-works)
  - Value props section with 4 cards: 70% Revenue Share, AI Handles Course Structure, 10K+ Learners Through Feed, Real-Time Analytics Dashboard
  - "The Creator Struggle" problem statement section with 4 pain points: Hours of Editing, Algorithm Anxiety, Revenue Uncertainty, Burnout Cycle
  - "The Dojo Solution" teaser with cyan accent styling
  - Embedded CreatorApplicationSection component at bottom with FadeIn wrapper
  - Scroll-triggered animations using useInView with staggered reveals
  - Hover effects on cards: y-lift, border glow with --dojo-border-accent
- **Learnings for future iterations**:
  - Dedicated pages can reuse existing section components (CreatorApplicationSection) with FadeIn wrapper
  - Badge pattern: inline-flex with gap, rounded-full, bg-[var(--dojo-cyan-muted)] for "For Creators" type badges
  - Problem statement pattern: Use destructive color variants (bg-destructive/10, text-destructive) for pain points
  - Solution teaser pattern: Follow problem with cyan-accented solution preview to create contrast
  - Page follows same animation patterns as homepage: useInView with once: true, amount: 0.2

---

## 2026-01-30 - US-010: Create dedicated For Learners page
- **Status**: Completed
- **Files**:
  - app/(marketing)/for-learners/page.tsx (new)
- **What was implemented**:
  - Created /for-learners route as a client component page
  - Hero section with "Master Any Skill, One Swipe at a Time" headline and badge
  - Animated background gradient effects and glow orbs matching homepage/for-creators hero
  - CTA buttons: "Join the Waitlist" (links to #waitlist) and "See How It Works" (links to /how-it-works)
  - Value props section with 4 cards: Bite-Sized Micro-Lessons (3 min), Learn From Practitioners (Real), Peer Reviewed Quality, Free Path to Mastery
  - "The Consumer Struggle" problem statement section with 4 pain points: Overwhelming Courses, Information Overload, Endless Scrolling, No Real Progress
  - "The Dojo Solution" teaser with cyan accent styling: "Swipe. Learn. Master."
  - Embedded LearnerWaitlistSection component at bottom with FadeIn wrapper
  - Scroll-triggered animations using useInView with staggered reveals
- **Learnings for future iterations**:
  - When importing lucide-react icons that share names with JS globals (like `Infinity`), use alias: `import { Infinity as InfinityIcon }` to avoid TypeScript conflicts with `repeat: Infinity` in motion animations
  - For Learners page follows same structure as For Creators: Hero → Value Props → Problem Statement → Solution Teaser → Form
  - Consumer struggles focus on content consumption issues vs Creator struggles focusing on production issues
  - Browser verification blocked by missing .env.local (Supabase credentials) - site-wide issue not specific to this page

---
